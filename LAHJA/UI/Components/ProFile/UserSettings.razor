@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@*   @page "/settings" 
 @using BlazorASG.Components.New

<main class="flex flex-1 flex-col">

    <TamltSettings />


</main> *@
 
 @*  @page "/settings/{*url}"
@inherits ComponentBase
@inject NavigationManager NavigationManager

<div class="container">
    <!-- عنوان الصفحة -->
    <h1>مرحبا بكم في صفحة Fragment</h1>

    <!-- ربط الروابط لنفس الصفحة -->
    <nav>
        <ul>
            <li><a href="settings/page">الصفحة 1</a></li>
            <li><a href="settings/page">الصفحة 2</a></li>
            <li><a href="settings/page3">الصفحة 3</a></li>
        </ul>
    </nav>

    <!-- محتوى يعتمد على القيمة URL -->
    @if (!string.IsNullOrEmpty(url))
    {
        <RenderFragment>
            @RenderComponentBasedOnUrl
        </RenderFragment>
    }
    else
    {
        <p>اختر صفحة لعرضها</p>
    }
</div>

@code
{
      [Parameter] public string url { get; set; }  // هذه الخاصية تعتمد على المسار الديناميكي

    // دالة لمعالجة بناء المحتوى بناءً على المسار URL
    private RenderFragment RenderComponentBasedOnUrl => builder =>
    {
        if (builder == null)
        {
            throw new ArgumentNullException(nameof(builder));
        }

        switch (url)
        {
            case "page":
                builder.OpenComponent(0, typeof(SidebarMenu));
                builder.CloseComponent();
                break;
            case "pagee":
                builder.OpenComponent(0, typeof(ContentPreferencesTemplate));
                builder.CloseComponent();
                break;
            case "page3":
                builder.OpenComponent(0, typeof(ContentPreferencesTemplate));
                builder.CloseComponent();
                break;
            default:
                builder.AddContent(0, new BillingSection());
                break;
        }
    };
 } *@
@* 
  @page "/settings/{*url}"
@inherits ComponentBase
@inject NavigationManager NavigationManager
<main class="flex flex-1 flex-col">

<div class="container relative flex flex-col md:grid md:space-y-0 w-full md:grid-cols-12 space-y-4 md:gap-6 py-6" style="margin-right: 15%;">
    <div class="md:col-span-4 lg:col-span-3">
        <!-- Sidebar Content -->
        <section class="pt-6 border-gray-100 from-gray-50-to-white overflow-hidden rounded-xl border border-gray-100 bg-gradient-to-l">
            <a class="cols-span-9 mb-2 flex items-center px-4 pb-4" href="/735408478mm">
                <div class="relative flex-none">
                    <img alt="" class="rounded-full mr-3 size-12 flex-none overflow-hidden bg-gray-100 dark:bg-gray-900" src="https://cdn-avatars.huggingface.co/v1/production/uploads/noauth/SXJTVYmE71adfaZsiGDsE.png">
                </div>
                <div class="my-1">
                    <h1 class="flex items-center text-lg/5 font-bold lg:text-xl/6">عبدالرحمن</h1>
                    <div class="inline-block rounded bg-gray-200 px-1 font-mono text-xs dark:bg-gray-800">735408478mm</div>
                </div>
            </a>
            <nav>
                <ul class="divide-y divide-gray-100 border-t border-gray-100 text-base text-gray-600">
                    <li>
                        <a href="settings/profile" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Profile</div>


                        </a>
                    </li>
                    <li>
                        <a href="settings/Account" class="group relative flex items-center overflow-hidden px-2 py-1.5 bg-gradient-to-r from-gray-100 font-semibold text-gray-900 dark:from-gray-800 dark:to-transparent dark:text-gray-200 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Account</div>


                        </a>
                    </li>
                    <li>
                        <a href="settings/authentication" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Authentication</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/organizations" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Organizations</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/billing" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Billing</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/tokens" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Access Tokens</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/keys" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">SSH and GPG Keys</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/webhooks" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Webhooks</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/papers" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Papers</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/notifications" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Notifications</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/local-apps" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Local Apps and Hardware</div>


                            <span class="ml-auto mr-1.5 rounded px-1.5 py-0.5 text-xs font-semibold leading-tight bg-blue-500/10 text-blue-700 dark:text-blue-200">NEW</span>
                        </a>
                    </li>
                    <li>
                        <a href="/settings/gated-repos" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Gated Repositories</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/content-preferences" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Content Preferences</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/connected-applications" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Connected Apps</div>


                        </a>
                    </li>
                    <li>
                        <a href="/settings/theme" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400 ">
                            <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">Theme</div>


                        </a>
                    </li>
                </ul>
            </nav>
        </section>
        <div slot="footer" class="mt-3 flex items-center gap-2 text-sm text-gray-400 lg:px-4">
            Upgrade to
            <a class="flex items-center border-b hover:border-gray-600 hover:text-gray-600 dark:border-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200" href="/settings/billing/subscription#subscribe">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.198 1.961a3.164 3.164 0 0 1 1.711-.616h5.455c1.163 0 1.818.946 1.454 2.073l-1.672 5.164c-.364 1.127-1.637 2.072-2.837 2.072H1.855C.69 10.654 0 9.71.364 8.582l1.745-5.164A3.164 3.164 0 0 1 3.2 1.96Zm1.807 1.705L3.387 8.364h1.315l.513-1.49h.535c.346 0 .69-.057 1.03-.173.346-.115.652-.293.918-.534a2.2 2.2 0 0 0 .606-.94c.136-.395.15-.706.039-.932-.106-.227-.295-.388-.567-.484a2.853 2.853 0 0 0-.952-.145h-1.82Zm1.022 2.226h-.474l.428-1.243h.443c.255 0 .436.043.544.13.108.087.125.236.052.448a.977.977 0 0 1-.36.492c-.162.115-.373.173-.612.173Z" fill="currentColor"></path>
                </svg> Pro
            </a>
        </div>
    </div>

    <!-- محتوى يعتمد على القيمة URL -->
    @if (!string.IsNullOrEmpty(url))
    {
        <RenderFragment class="md:col-span-8 lg:col-span-9">
                

            @RenderComponentBasedOnUrl
       
        </RenderFragment>
    }
    else
    {
        <p>اختر صفحة لعرضها</p>
    }
</div>
</main>
@code
{
      [Parameter] public string url { get; set; }  // هذه الخاصية تعتمد على المسار الديناميكي

    // دالة لمعالجة بناء المحتوى بناءً على المسار URL
    private RenderFragment RenderComponentBasedOnUrl => builder =>
    {
        if (builder == null)
        {
            throw new ArgumentNullException(nameof(builder));
        }

        switch (url)
        {
            case "profile":
                builder.OpenComponent(0, typeof(SidebarMenu));
                builder.CloseComponent();
                break;
            case "Account":
                builder.OpenComponent(0, typeof(ContentPreferencesTemplate));
                builder.CloseComponent();
                break;
            case "page3":
                builder.OpenComponent(0, typeof(ContentPreferencesTemplate));
                builder.CloseComponent();
                break;
            default:
                builder.AddContent(0, new BillingSection());
                break;
        }
    };
  }*@
@* 
 @page "/settings/{*url}"
@inherits ComponentBase
@inject NavigationManager NavigationManager

<div class="container relative flex flex-col md:grid md:space-y-0 w-full md:grid-cols-12 space-y-4 md:gap-6 py-6" style="margin-right: 15%;">
    <div class="md:col-span-4 lg:col-span-3">
        <section class="pt-6 border-gray-100 from-gray-50-to-white overflow-hidden rounded-xl border border-gray-100 bg-gradient-to-l">
            <a class="cols-span-9 mb-2 flex items-center px-4 pb-4" href="#">
                <div class="relative flex-none">
                    <img alt="" class="rounded-full mr-3 size-12 flex-none overflow-hidden bg-gray-100 dark:bg-gray-900"
                         src="https://cdn-avatars.huggingface.co/v1/production/uploads/noauth/SXJTVYmE71adfaZsiGDsE.png">
                </div>

                <div class="my-1">
                    <h2 class="flex items-center text-lg/5 font-bold lg:text-xl/6">عبدالرحمن</h2>
                    <div class="inline-block rounded bg-gray-200 px-1 font-mono text-xs dark:bg-gray-800">@url</div>
                </div>
            </a>
            <nav>
                <ul class="divide-y divide-gray-100 border-t border-gray-100 text-base text-gray-600">
                    @foreach (var item in NavItems)
                    {
                        <li>
                            <a href="@item.url" class="group relative flex items-center overflow-hidden px-2 py-1.5 dark:text-gray-400">
                                <div class="block rounded px-2 py-0.5 group-hover:bg-gray-100 dark:group-hover:bg-gray-800">@item.Label</div>
                                @if (!string.IsNullOrEmpty(item.Badge))
                                {
                                    <span class="ml-auto mr-1.5 rounded px-1.5 py-0.5 text-xs font-semibold leading-tight bg-blue-500/10 text-blue-700 dark:text-blue-200">@item.Badge</span>
                                }
                            </a>
                        </li>
                    }
                </ul>
            </nav>
        </section>

        <div slot="footer" class="mt-3 flex items-center gap-2 text-sm text-gray-400 lg:px-4">
            Upgrade to
            <a class="flex items-center border-b hover:border-gray-600 hover:text-gray-600 dark:border-gray-600 dark:hover:border-gray-200 dark:hover:text-gray-200" href="/settings/billing/subscription#subscribe">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 12 12">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M3.198 1.961a3.164 3.164 0 0 1 1.711-.616h5.455c1.163 0 1.818.946 1.454 2.073l-1.672 5.164c-.364 1.127-1.637 2.072-2.837 2.072H1.855C.69 10.654 0 9.71.364 8.582l1.745-5.164A3.164 3.164 0 0 1 3.2 1.96Zm1.807 1.705L3.387 8.364h1.315l.513-1.49h.535c.346 0 .69-.057 1.03-.173.346-.115.652-.293.918-.534a2.2 2.2 0 0 0 .606-.94c.136-.395.15-.706.039-.932-.106-.227-.295-.388-.567-.484a2.853 2.853 0 0 0-.952-.145h-1.82Zm1.022 2.226h-.474l.428-1.243h.443c.255 0 .436.043.544.13.108.087.125.236.052.448a.977.977 0 0 1-.36.492c-.162.115-.373.173-.612.173Z" fill="currentColor"></path>
                </svg> Pro
            </a>
        </div>
    </div>

        @if (!string.IsNullOrEmpty(url))
    {
        <RenderFragment class="md:col-span-8 lg:col-span-9">
                

            @RenderComponentBasedOnUrl
       
        </RenderFragment>
    }
    else
    {
        <p>اختر صفحة لعرضها</p>
    }
   
</div>

@code {
    private List<NavItem> NavItems = new()
    {
        new NavItem { Label = "Profile", url = "settings/profile" },
        new NavItem { Label = "Account", url = "settings/Account" },
        new NavItem { Label = "Authentication", url = "settings/authentication" },
        new NavItem { Label = "Organizations", url = "settings/organizations" },
        new NavItem { Label = "Billing", url = "settings/billing" },
        new NavItem { Label = "Access Tokens", url = "settings/AccessTokens" },
        new NavItem { Label = "SSH and GPG Keys", url = "settings/keys" },
        new NavItem { Label = "Webhooks", url = "settings/webhooks" },
        new NavItem { Label = "Papers", url = "settings/papers" },
        new NavItem { Label = "Notifications", url = "settings/notifications" },
        new NavItem { Label = "Local Apps and ", url = "settings/local-apps", Badge = "NEW" },
        new NavItem { Label = "Gated Repositories", url = "settings/gated-repos" },
        new NavItem { Label = "Content Preferences", url = "settings/content-preferences" },
        new NavItem { Label = "Connected Apps", url = "settings/connected-applications" },
        new NavItem { Label = "Theme", url = "settings/theme" }
    };

    [Parameter] public string url { get; set; }  // هذه الخاصية تعتمد على المسار الديناميكي

    // private void NavigateTo(string template)
    // {
    //     url = template;
    // }

    private RenderFragment RenderComponentBasedOnUrl => builder =>
    {
        if (builder == null)
        {
            throw new ArgumentNullException(nameof(builder));
        }
        switch (url)
        {
            case "profile":
                builder.OpenComponent(0, typeof(SidebarMenu));
                builder.CloseComponent();
                break;
            case "Account":
                builder.OpenComponent(0, typeof(AccountTemplate));
                builder.CloseComponent();
                break;
            case "authentication":
                builder.OpenComponent(0, typeof(AuthenticationTemplate));
                builder.CloseComponent();
                break;
            case "organizations":
                builder.OpenComponent(0, typeof(OrganizationsTemplate));
                builder.CloseComponent();
                break;
            case "billing":
                builder.OpenComponent(0, typeof(BillingSection));
                builder.CloseComponent();
                break;
            case "AccessTokens":
                builder.OpenComponent(0, typeof(AccessTokensTemplate));
                builder.CloseComponent();
                break;
            case "keys":
                builder.OpenComponent(0, typeof(SSHandGPGKeysTemplate));
                builder.CloseComponent();
                break;
            case "webhooks":
                builder.OpenComponent(0, typeof(WebhooksTemplate));
                builder.CloseComponent();
                break;
            case "papers":
                builder.OpenComponent(0, typeof(PapersTemplate));
                builder.CloseComponent();
                break;
            case "notifications":
                builder.OpenComponent(0, typeof(NotificationsTemplate));
                builder.CloseComponent();
                break;
            case "local-apps":
                builder.OpenComponent(0, typeof(LocalAppsTemplate));
                builder.CloseComponent();
                break;
            case "gated-repos":
                builder.OpenComponent(0, typeof(GatedRepositoriesTemplate));
                builder.CloseComponent();
                break;
            case "content-preferences":
                builder.OpenComponent(0, typeof(ContentPreferencesTemplate));
                builder.CloseComponent();
                break;
            case "connected-applications":
                builder.OpenComponent(0, typeof(ConnectedAppsTemplate));
                builder.CloseComponent();
                break;
            case "theme":
                builder.OpenComponent(0, typeof(ThemeTemplate));
                builder.CloseComponent();
                break;
            default:
                builder.AddContent(0, new BillingSection());
                break;

         
           
        }
    };

    private class NavItem
    {
        public string Label { get; set; }
        public string url { get; set; }
        public string Badge { get; set; }
    }
}
 *@
@*   @page "/new"
 *@
@*  @page "/settings/webhooks/new"
 *@<section class="pt-6 border-gray-100 md:col-span-8 lg:col-span-9 xl:col-span-9 md:px-4 py-4">
    <div class="mb-6">
        <div class="flex justify-between">
            <h1 class="flex flex-row items-center text-xl font-bold">
                New webhook
            </h1>
            <a slot="header" class="ml-2 mr-auto self-center text-xs text-gray-400 hover:text-gray-800" target="_blank" href="/docs/hub/webhooks"><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M17 22v-8h-4v2h2v6h-3v2h8v-2h-3z" fill="currentColor"></path><path d="M16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8z" fill="currentColor"></path><path d="M16 30a14 14 0 1 1 14-14a14 14 0 0 1-14 14zm0-26a12 12 0 1 0 12 12A12 12 0 0 0 16 4z" fill="currentColor"></path></svg></a>
        </div>
    </div>
    <div class="SVELTE_HYDRATER contents" data-target="WebhookSettings" data-props="{&quot;classNames&quot;:&quot;mt-6&quot;}">
        <form class="flex flex-col gap-y-6 mt-6">
            <div>
                <label for="targets">
                    Target repositories
                    <div class="relative w-full"><input autocomplete="off" class="w-full dark:bg-gray-950  form-input " name="targets" placeholder="eg: stabilityai/stable-diffusion" spellcheck="false" type="text">  </div>
                </label>  <div class="mt-2 text-sm text-gray-400">
                    Any repository on the hub you want to listen to new events, can be any model, dataset or Space. You can also
                    subscribe to a whole user or org namespace.
                </div>
            </div> <label>
                Webhook URL
                <input type="url" class="form-input" placeholder="eg: https://example.com/post-target" required=""> <div class="mt-2 text-sm text-gray-400">The payload will be sent as JSON in a POST request.</div>
            </label> <label>Secret <span class="text-gray-400">(optional)</span> <input type="text" class="form-input" pattern="[\x20-\x7F]*"> <div class="mt-2 text-sm text-gray-400">The secret will be sent in the X-Webhook-Secret header. Use ASCII characters.</div></label> <div><div class="mb-2">Triggers</div> <div class="flex items-center"><label class="mr-4 flex items-center"><input type="checkbox" class="form-input mr-1.5" value="repo"> Repo update</label> <label class="flex items-center"><input type="checkbox" class="form-input mr-1.5" value="discussion"> Community (PR &amp; discussions)</label></div> <div class="mt-2 text-sm text-gray-400">Choose which events will trigger the webhook. <a href="/docs/hub/webhooks" target="_blank" class="underline">Read more about webhooks payloads</a>.</div></div>  <div class="flex items-center"><button type="submit" class="btn">Create webhook</button> <a class="btn ml-2 w-fit" href="/settings/webhooks">Cancel</a></div>
        </form>
    </div>
</section>